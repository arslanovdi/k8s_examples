# k3s

## [Установка](https://docs.k3s.io/installation)
Это можно сделать, запустив следующую команду:
```bash
curl -sfL https://get.k3s.io | sh -
```

Файл конфигурации находится по пути `/etc/rancher/k3s/k3s.yaml` на машине. Скопируйте этот файл на свою локальную машину и сохраните его как ~/.kube/config
Заменить ip на актуальный.

## Присоединение нового узла к кластеру k3s (необязательно)
Получить токен сервера k3s с существующего узла:
```bash
sudo cat /var/lib/rancher/k3s/server/node-token
```

На новом узле нужно выполнить следующие команды:
```bash
curl -sfL https://get.k3s.io | sh -
```

Отключить фаерволл:
```bash
sudo ufw disable
```

Для подключения нового узла к кластеру k3s вам нужно выполнить следующую команду на новом узле, используя токен сервера, который вы получили из предыдущей команды:
```bash
sudo k3s agent --server https://<ip_or_hostname_of_existing_node>:6443 --token <server_token>
```

Замените <ip_or_hostname_of_existing_node> на IP-адрес или имя хоста существующего узла, а <server_token> на токен сервера, который вы получили ранее.

Чтобы убедиться, что новый узел присоединился к кластеру k3s, вы можете выполнить следующую команду:

```bash
kubectl get nodes
```
